sap.ui.define(["pinaki/app/credentialManager/controller/BaseController","sap/ui/model/Filter"],function(e,t){"use strict";return e.extend("pinaki.app.credentialManager.controller.MainView",{onAddCredentialpress:function(){let e=this.getView().getModel().getProperty("/aCreds");let t=JSON.parse(JSON.stringify(this.getView().getModel().getProperty("/crendentialTemplate")));t.lastChanged=new Date;e=[...e,t];this.getView().getModel().setProperty("/aCreds",e);this.getView().getModel().updateBindings();this.getView().getModel().firePropertyChange()},toggleEditMode:function(e){var t=!e.getSource().getBindingContext().getObject().editMode;this.getView().getModel().getProperty("/aCreds").forEach(e=>{e.editMode=false});e.getSource().getBindingContext().getObject().editMode=t;e.getSource().getBindingContext().getObject().lastChanged=new Date;e.getSource().getModel().updateBindings();e.getSource().getModel().firePropertyChange();e.getSource().getModel().refresh()},onDeleteCredPress:function(e){var t=e.getSource().getBindingContext().getPath();var r=t.split("/").pop();let i=this.getView().getModel().getProperty("/aCreds");i.splice(r,1);this.getView().getModel().setProperty("/aCreds",i);e.getSource().getModel().updateBindings();e.getSource().getModel().firePropertyChange();sap.m.MessageToast.show("Credentials Deleted Successfully",{duration:1e4})},onCredSearch:function(e){var r=this.getView().byId("credList");r.getBinding("items").filter(new t({filters:[new t({path:"name",operator:"Contains",value1:e.getParameter("newValue")}),new t({path:"username",operator:"Contains",value1:e.getParameter("newValue")})],and:false}))},onAfterRendering:function(){this.loadFromLocal();sap.m.MessageToast.show("Tap on an item to view, edit",{duration:1e4})},changeTheme:function(e){sap.ui.getCore().getConfiguration().getTheme()=="sap_fiori_3_dark"?sap.ui.getCore().applyTheme("sap_fiori_3"):sap.ui.getCore().applyTheme("sap_fiori_3_dark")},reload:function(){location.reload(true)},downloadCSV:function(){downloadCSVFromJson(`CredentialManager.csv`,this.getView().getModel().getProperty("/aCreds"))},resetAllData:function(){this.getView().getModel().setProperty("/aCreds",[]);this.getView().getModel().firePropertyChange()}})});